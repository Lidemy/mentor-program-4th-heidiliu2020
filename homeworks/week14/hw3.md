## 什麼是 DNS？Google 有提供的公開的 DNS，對 Google 的好處以及對一般大眾的好處是什麼？

### DNS 域名系統

在課程[第四週的網路基礎概論](https://github.com/heidiliu2020/This-is-Codediary/blob/master/week4_%E7%B6%B2%E8%B7%AF%E5%9F%BA%E7%A4%8E%E6%A6%82%E8%AB%96.md)時我們也曾提過 DNS。

- 全名是 Domain Name System
- 負責將域名轉換成 IP 位置。可將 DNS 伺服器作為一個分散式資料庫
  - 域名（Domain）：即常用的網址。google.com 就是一個域名，類似景點名稱
  - IP 位置：每個主機都有個 IP 位置，是網路溝通的地址。由四個數字組成，範圍是 0 ~ 255
- 功能類似網路上的電話簿，我們在搜尋網站的同時，是由 DNS 提供將網站名稱（域名）轉成號碼（IP 位置）的目錄服務

### Google 有提供的公開的 DNS，對 Google 的好處以及對一般大眾的好處？

#### 對 Google 的好處
- 透過搜尋引擎來蒐集大數據，藉以分析使用者行為，以應用於商業目的
- 日後可提供更符合該使用地區的資料，或是投放更精準的廣告

#### 對一般大眾的好處

- 使用免費
- 提升網路安全性，例如：擋下惡意網站訊息
- 加速瀏覽體驗：可能增加上網速度
- 直接取得 DNS 查詢結果：因為已經快取，就不需查詢上層 DNS 記錄

---

## 什麼是資料庫的 lock？為什麼我們需要 lock？

資料庫 lock，意思是交易資料鎖定。

當多筆交易在讀取或寫入資料時，彼此會相互影響。因此為了交易的並行性與獨立性，需透過做「記號」來標記該資料狀態正在被讀取或寫入，其他交易則根據該記號決定能否執行其他操作，這個記號就是所謂的 lock（交易鎖定）。但由於鎖定後會需要等待執行，也須考慮到效能上的損耗。

程式碼範例如下：

```
$conn->autocommit(FALSE);            // 避免每次自動變成 transaction
$conn->begin_transaction();          // 開始 transaction
$conn->query("SELECT amount from products where id = 1 for update");
// 加上 for update: 更新後就會把這行鎖起來，沒有指定欄位的話會鎖住 Schema
$conn->commit();                     // 當發出 commit 後才會執行
```

#### 什麼情況需要 Lock 鎖？

舉例來說，當某個商品限定數量，造成搶購時可能會發生「超賣」情形，此現象又稱作 race condition（競爭危害）。若能在交易時加上 lock，即可避免同時讀取和寫入同一筆資料時產生的資料衝突，避免系統發生錯誤。

---

## NoSQL 跟 SQL 的差別在哪裡？

SQL（Structured Query Language），中文為「結構化查詢語言」，是一種專門用來管理與查詢「關聯式資料庫」的程式語言。與之相對的是 NoSQL（Not Only SQL），「非關聯式資料庫」，也就是不限定為關聯式資料庫的資料庫管理系統。

NoSQL 的特性大致如下：

以下則是關聯式與非關聯式資料庫的差別：

#### 關聯式資料庫（RDBMS）
- 全名：Relational Database Management System
- 以 SQL 語言操作
- 儲存方式：使用不同 table 存取不同類型的內容
- 特性：資料之間保有相關性，也避免不相關的資料互相干擾
- 常見程式：MySQL、PostgreSQL、Microsoft SQL Server
- 例如：會員資料庫，其中明確關聯是會員 ID

#### 非關聯式資料庫（NoSQL）
- 全名：Not Only SQL
- 不限定使用 SQL 語言
- 儲存方式：使用 key-value 儲存資料，且沒有 Schema，可想像成把 JSON 資料存進資料庫
- 特性：彈性較高，通常用來存一些結構不固定的資料，因此不支援 JOIN
- 常見程式：mongoDB
- 例如：存取 log 日誌、社交網站上的大量資訊（文章被分享、按讚數等）

---

## 資料庫的 ACID 是什麼？

在執行資料庫事務時，為了保證 Transaction（交易）的正確性，必須符合 ACID 四個特性：

1. 原子性 atomicity：全部失敗 or 全部成功
例如：小明轉帳 100 元給小美，成功的話小明 -100 元，小美 +100 元；失敗的話不會有任何變化。

2. 一致性 consistency：維持資料的一致性
例如：交易前後，錢的總數均不會改變。

3. 隔離性 isolation：多筆交易不會互相影響，也就是不能同時變動同一個值
例如：小明只有 100 元，如果要同時轉帳 100 元給小美和小華，會產生負值這樣的系統錯誤。因此需要使用上述的 Lock 鎖，鎖定交易資料，即可避免同時修改到同一個值。

4. 持久性 durability：交易成功之後，寫入的資料不會不見
